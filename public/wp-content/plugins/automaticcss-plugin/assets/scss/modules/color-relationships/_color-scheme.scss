// Add support for color scheme so contextual utility values are re-mapped to correct scheme.
// All new relationship utilities must be accounted for here.
@if $option-relate-bg-text == on {
    #{$color-scheme-main-selectors} {
		@if $option-contextual-color-variables == on {
			--bg-ultra-light-text: #{$bg-ultra-light-text};
			--bg-light-text: #{$bg-light-text};
			--bg-dark-text: #{$bg-dark-text};
			--bg-ultra-dark-text: #{$bg-ultra-dark-text};
		}
		// Generate Contextual Heading Relationship Tokens if Values are Set
		@each $color, $value in $contextual-heading-relationships {
			@if $value != null {
				--bg-#{$color}-heading: #{$value};
			}
		}
		// Generate Contextual Link Relationship Tokens if Values are Set
		@each $color, $value in $contextual-link-relationships {
			@if nth($value, 1) != null {
				--bg-#{$color}-link: #{nth($value, 1)};
			}
			@if nth($value, 2) != null {
				--bg-#{$color}-link-hover: #{nth($value, 2)};
			}
		}
    }
    .color-scheme--alt {
		@if $option-contextual-color-variables == on {
			--bg-ultra-light-text: #{$bg-ultra-light-text};
			--bg-light-text: #{$bg-light-text};
			--bg-dark-text: #{$bg-dark-text};
			--bg-ultra-dark-text: #{$bg-ultra-dark-text};
		}
		// Generate Contextual Heading Relationship Tokens if Values are Set
		@each $color, $value in $contextual-heading-relationships {
			@if $value != null {
				--bg-#{$color}-heading: #{$value};
			}
		}
        --bg-ultra-dark-text: #{$bg-ultra-dark-text};
		// Generate Contextual Link Relationship Tokens if Values are Set
		@each $color, $value in $contextual-link-relationships {
			@if nth($value, 1) != null {
				--bg-#{$color}-link: #{nth($value, 1)};
			}
			@if nth($value, 2) != null {
				--bg-#{$color}-link-hover: #{nth($value, 2)};
			}
		}
		// Add support for surfaces if surface is mapped to color relationships.
		@each $surface, $props in $surfaces {
			// Get the options so we can check their value
			$relationship: map-get($props, "relationship");
			// Check to see if there's a declared relationship
			@if $relationship != null {
				// Loop through the main surface props that we need to declare
				@each $prop, $value in $props {
					$asset: map-get($props, "asset");
					// Declare the main surface props
					@if $value != null and $asset != null and $prop == "background-color" {
						--#{$surface}-#{$prop}: #{$value};
					}
				}
			}
		}
    }
}
